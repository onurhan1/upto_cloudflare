(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{2601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5155),a=s(2115),l=s(5695),i=s(6874),n=s.n(i),c=s(5731),d=s(1324),o=s(5169),u=s(5290);function g(){let e=(0,l.useRouter)(),t=(0,l.useParams)(),{currentOrganization:s}=(0,u.Z)(),i=t.id,[g,x]=(0,a.useState)({title:"",description:"",slug:"",is_public:!1,theme:"auto"}),[m,h]=(0,a.useState)([]),[b,p]=(0,a.useState)([]),[y,v]=(0,a.useState)(!0),[f,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(""),[S,k]=(0,a.useState)({});(0,a.useEffect)(()=>{C()},[i,s]);let C=async()=>{if(s)try{var e,t,r;let[a,l]=await Promise.all([c.F.getStatusPage(i),c.F.getServices(s.id)]);if(a.error)return void w(a.error);l.error&&console.error("Error loading services:",l.error);let n=null==(e=a.data)?void 0:e.page;n&&(x({title:n.title||"",description:n.description||"",slug:n.slug||"",is_public:1===n.is_public||!0===n.is_public,theme:n.theme||"auto"}),p((null==(r=a.data)?void 0:r.services)||[])),h((null==(t=l.data)?void 0:t.services)||[])}catch(e){w(e.message)}finally{v(!1)}},_=async t=>{if(t.preventDefault(),w(""),k({}),(()=>{let e={};return g.title.trim()||(e.title="Title is required"),g.slug.trim()?/^[a-z0-9-]+$/.test(g.slug)||(e.slug="Slug can only contain lowercase letters, numbers, and hyphens"):e.slug="Slug is required",k(e),0===Object.keys(e).length})()){j(!0);try{let t=await c.F.updateStatusPage(i,g);t.error?w(t.error):e.push("/status-pages")}catch(e){w(e.message)}finally{j(!1)}}},P=async e=>{try{let t=await c.F.addServiceToStatusPage(i,e,b.length);t.error?w(t.error):C()}catch(e){w(e.message)}},A=async e=>{try{let t=await c.F.removeServiceFromStatusPage(i,e);t.error?w(t.error):C()}catch(e){w(e.message)}};return y?(0,r.jsx)(d.A,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"text-gray-400",children:"Loading..."})})}):(0,r.jsx)(d.A,{children:(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsxs)(n(),{href:"/status-pages",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[(0,r.jsx)(o.A,{size:18}),"Back to Status Pages"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Edit Status Page"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-6",children:"Update your status page settings"}),N&&(0,r.jsx)("div",{className:"mb-6 bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg",children:N}),(0,r.jsxs)("form",{onSubmit:_,className:"bg-gray-900 border border-gray-800 rounded-lg p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),(0,r.jsx)("input",{type:"text",required:!0,value:g.title,onChange:e=>x({...g,title:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-600 ".concat(S.title?"border-red-500":"border-gray-700")}),S.title&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-400",children:S.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug *"}),(0,r.jsx)("input",{type:"text",required:!0,value:g.slug,onChange:e=>x({...g,slug:e.target.value.toLowerCase()}),placeholder:"my-status-page",className:"w-full px-3 py-2 bg-gray-800 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 ".concat(S.slug?"border-red-500":"border-gray-700")}),S.slug&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-400",children:S.slug}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-400",children:["Public URL: /s/",g.slug||"slug"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:g.description,onChange:e=>x({...g,description:e.target.value}),rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Theme"}),(0,r.jsxs)("select",{value:g.theme,onChange:e=>x({...g,theme:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,r.jsx)("option",{value:"auto",children:"Auto"}),(0,r.jsx)("option",{value:"light",children:"Light"}),(0,r.jsx)("option",{value:"dark",children:"Dark"})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:g.is_public,onChange:e=>x({...g,is_public:e.target.checked}),className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"Make this status page public"})]})}),(0,r.jsxs)("div",{className:"border-t border-gray-800 pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Services on this page"}),0===b.length?(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"No services added yet."}):(0,r.jsx)("div",{className:"space-y-2 mb-4",children:b.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded",children:[(0,r.jsx)("span",{className:"text-sm text-white",children:e.name}),(0,r.jsx)("button",{onClick:()=>A(e.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]},e.id))}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Add Service"}),(0,r.jsxs)("select",{onChange:e=>{e.target.value&&(P(e.target.value),e.target.value="")},className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,r.jsx)("option",{value:"",children:"Select a service..."}),m.filter(e=>!b.some(t=>t.id===e.id)).map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:f?"Saving...":"Save Changes"}),(0,r.jsx)(n(),{href:"/status-pages",className:"px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700 transition border border-gray-700",children:"Cancel"})]})]})]})})}},5169:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7880:(e,t,s)=>{Promise.resolve().then(s.bind(s,2601))}},e=>{e.O(0,[874,597,739,712,324,441,583,358],()=>e(e.s=7880)),_N_E=e.O()}]);