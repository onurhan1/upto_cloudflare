(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{5673:(e,t,r)=>{Promise.resolve().then(r.bind(r,9690))},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},5731:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});class n{setToken(e){this.token=e,e?(localStorage.setItem("token",e),console.log("Token saved to localStorage")):(localStorage.removeItem("token"),console.log("Token removed from localStorage"))}getToken(){return localStorage.getItem("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.startsWith("/")?e:"/".concat(e),n=this.baseUrl.replace(/\/$/,""),o="".concat(n).concat(r);console.log("\uD83D\uDD35 API Request:",t.method||"GET",o);let s={"Content-Type":"application/json",...t.headers},i=this.getToken();if(i&&(s.Authorization="Bearer ".concat(i)),!e.startsWith("/auth/")&&!e.startsWith("/oauth/")){let t=localStorage.getItem("currentOrganizationId");!t||s["X-Organization-ID"]||e.includes("organization_id=")||(s["X-Organization-ID"]=t)}try{let e=await fetch(o,{...t,headers:s,mode:"cors",credentials:"include"});if(console.log("\uD83D\uDFE2 Response status:",e.status,e.statusText),!e.ok)try{let t=await e.json();return console.error("\uD83D\uDD34 API error response:",t),{error:t.error||"Request failed with status ".concat(e.status)}}catch(t){return console.error("\uD83D\uDD34 Failed to parse error response:",t),{error:"Request failed with status ".concat(e.status)}}let r=await e.json();return console.log("✅ API response received:",Object.keys(r)),{data:r}}catch(e){var a;if(console.error("\uD83D\uDD34 API request error:",e),console.error("Error details:",{name:e.name,message:e.message,url:o}),"Failed to fetch"===e.message||"TypeError"===e.name||(null==(a=e.message)?void 0:a.includes("fetch")))return{error:"Cannot connect to server at ".concat(o,". Please make sure the backend is running on http://localhost:8787. Check browser console for details.")};return{error:e.message||"Network error"}}}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e,t,r){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:r})})}async getServices(e,t){let r=new URLSearchParams({organization_id:e});return t&&r.append("project_id",t),this.request("/services?".concat(r.toString()))}async getService(e){return this.request("/services/".concat(e))}async getServiceSuggestions(e){return this.request("/services/".concat(e,"/suggestions"))}async createService(e,t){return this.request("/services",{method:"POST",headers:{"X-Organization-ID":t},body:JSON.stringify({...e,organization_id:t})})}async updateService(e,t){return this.request("/services/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteService(e){return this.request("/services/".concat(e),{method:"DELETE"})}async testService(e){return this.request("/services/".concat(e,"/test"),{method:"POST"})}async getIncidents(e){let t=new URLSearchParams(e).toString();return this.request("/incidents".concat(t?"?".concat(t):""))}async getIncident(e){return this.request("/incidents/".concat(e))}async createIncident(e){return this.request("/incidents",{method:"POST",body:JSON.stringify(e)})}async updateIncident(e,t){return this.request("/incidents/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async getStatusPages(){return this.request("/status-page/mine")}async createStatusPage(e){return this.request("/status-page",{method:"POST",body:JSON.stringify(e)})}async getStatusPage(e){return this.request("/status-page/".concat(e))}async updateStatusPage(e,t){return this.request("/status-page/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async getIntegrations(){return this.request("/integrations")}async updateTelegramIntegration(e){return this.request("/integrations/telegram",{method:"PATCH",body:JSON.stringify(e)})}async updateEmailIntegration(e){return this.request("/integrations/email",{method:"PATCH",body:JSON.stringify(e)})}async deleteStatusPage(e){return this.request("/status-page/".concat(e),{method:"DELETE"})}async addServiceToStatusPage(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.request("/status-page/".concat(e,"/services"),{method:"POST",body:JSON.stringify({service_id:t,display_order:r})})}async removeServiceFromStatusPage(e,t){return this.request("/status-page/".concat(e,"/services/").concat(t),{method:"DELETE"})}async getOAuthProviders(){return this.request("/oauth/providers")}async handleOAuthCallback(e,t,r){return this.request("/oauth/".concat(e,"/callback"),{method:"POST",body:JSON.stringify({code:t,state:r})})}async getCurrentUser(){return this.request("/users/me")}async getOrganizations(){return this.request("/organizations")}async createOrganization(e,t){return this.request("/organizations",{method:"POST",body:JSON.stringify({name:e,slug:t})})}async getOrganization(e){return this.request("/organizations/".concat(e))}async inviteToOrganization(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member";return this.request("/organizations/".concat(e,"/invite"),{method:"POST",body:JSON.stringify({email:t,role:r})})}async getOrganizationInvitations(e){return this.request("/organizations/".concat(e,"/invitations"))}async getProjects(e){return this.request("/projects?organization_id=".concat(e))}async createProject(e,t,r){return this.request("/projects",{method:"POST",headers:{"X-Organization-ID":r},body:JSON.stringify({name:e,description:t,organization_id:r})})}async getProject(e,t){return this.request("/projects/".concat(e,"?organization_id=").concat(t))}async updateProject(e,t,r){return this.request("/projects/".concat(e),{method:"PATCH",headers:{"X-Organization-ID":t},body:JSON.stringify(r)})}async deleteProject(e,t){return this.request("/projects/".concat(e),{method:"DELETE",headers:{"X-Organization-ID":t}})}async getInvitationDetails(e){return this.request("/invitations/".concat(e))}async acceptInvitation(e){return this.request("/invitations/".concat(e,"/accept"),{method:"POST"})}async getApiKeys(){return this.request("/settings/api-keys")}async saveApiKey(e,t){return this.request("/settings/api-keys/".concat(e),{method:"PUT",body:JSON.stringify({apiKey:t})})}async deleteApiKey(e){return this.request("/settings/api-keys/".concat(e),{method:"DELETE"})}async updateProfile(e,t){return this.request("/settings/profile",{method:"PATCH",body:JSON.stringify({name:e,email:t})})}async changePassword(e,t){return this.request("/settings/password",{method:"PATCH",body:JSON.stringify({currentPassword:e,newPassword:t})})}async getAuditLogs(e){let t=new URLSearchParams;return(null==e?void 0:e.action)&&t.append("action",e.action),(null==e?void 0:e.resource_type)&&t.append("resource_type",e.resource_type),(null==e?void 0:e.user_id)&&t.append("user_id",e.user_id),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString()),(null==e?void 0:e.start_date)&&t.append("start_date",e.start_date.toString()),(null==e?void 0:e.end_date)&&t.append("end_date",e.end_date.toString()),this.request("/audit?".concat(t.toString()))}constructor(e){this.token=null,this.baseUrl=e.replace(/\/$/,""),console.log("\uD83D\uDD35 ApiClient initialized with baseUrl:",this.baseUrl),this.token=localStorage.getItem("token")}}let o=new n("https://upto-backend.onurhanyilmaz87.workers.dev")},9690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(5155),o=r(2115),s=r(5695),i=r(6874),a=r.n(i),c=r(5731);function d(){(0,s.useRouter)();let[e,t]=(0,o.useState)(""),[r,i]=(0,o.useState)(""),[d,l]=(0,o.useState)(""),[u,g]=(0,o.useState)(!1),h=async t=>{t.preventDefault(),l(""),g(!0);try{var n,o;console.log("Attempting login with:",e);let t=await c.F.login(e,r);if(console.log("Login result:",t),t.error){l(t.error),g(!1);return}if(null==(n=t.data)?void 0:n.token){console.log("Token received, saving..."),c.F.setToken(t.data.token),(null==(o=t.data)?void 0:o.organizations)&&t.data.organizations.length>0&&(localStorage.setItem("organizations",JSON.stringify(t.data.organizations)),t.data.defaultOrganizationId?localStorage.setItem("currentOrganizationId",t.data.defaultOrganizationId):t.data.organizations[0]&&localStorage.setItem("currentOrganizationId",t.data.organizations[0].id));let e=c.F.getToken();console.log("Token saved:",e?"Yes":"No"),e?window.location.href="/dashboard":(l("Failed to save token"),g(!1))}else t.error?l(t.error):(console.error("No token in response:",t),l("Login failed: No token received")),g(!1)}catch(e){console.error("Login error:",e),l(e.message||"An error occurred"),g(!1)}};return(0,n.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#030712"},children:(0,n.jsxs)("div",{style:{maxWidth:"28rem",width:"100%",padding:"2rem",backgroundColor:"#111827",border:"1px solid #1f2937",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem"},children:"Upto"}),(0,n.jsx)("h2",{style:{fontSize:"1.125rem",color:"#9ca3af"},children:"Security Monitoring Platform"})]}),(0,n.jsxs)("form",{onSubmit:h,style:{marginTop:"2rem"},children:[d&&(0,n.jsx)("div",{style:{padding:"0.75rem 1rem",borderRadius:"0.5rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#f87171",marginBottom:"1rem"},children:d}),(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("label",{htmlFor:"email",style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#d1d5db",marginBottom:"0.5rem"},children:"Email address"}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:e=>t(e.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#ffffff",outline:"none",boxSizing:"border-box"},placeholder:"you@example.com"})]}),(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("label",{htmlFor:"password",style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#d1d5db",marginBottom:"0.5rem"},children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:e=>i(e.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#ffffff",outline:"none",boxSizing:"border-box"},placeholder:"••••••••"})]}),(0,n.jsx)("button",{type:"submit",disabled:u,style:{width:"100%",padding:"0.5rem 1rem",backgroundColor:u?"#4b5563":"#2563eb",color:"#ffffff",borderRadius:"0.5rem",fontWeight:"500",fontSize:"0.875rem",border:"none",cursor:u?"not-allowed":"pointer",opacity:u?.5:1},children:u?"Signing in...":"Sign in"}),(0,n.jsxs)("div",{style:{position:"relative",margin:"1.5rem 0"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"50%",left:0,right:0,borderTop:"1px solid #374151"}}),(0,n.jsx)("div",{style:{position:"relative",display:"flex",justifyContent:"center"},children:(0,n.jsx)("span",{style:{padding:"0 0.5rem",backgroundColor:"#111827",color:"#9ca3af",fontSize:"0.875rem"},children:"Or continue with"})})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,n.jsxs)("button",{type:"button",onClick:()=>{let e=window.location.origin;window.location.href="".concat("https://upto-backend.onurhanyilmaz87.workers.dev","/oauth/google?frontend_url=").concat(encodeURIComponent(e))},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#ffffff",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:[(0,n.jsxs)("svg",{style:{width:"1.25rem",height:"1.25rem",marginRight:"0.5rem"},viewBox:"0 0 24 24",fill:"currentColor",children:[(0,n.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,n.jsx)("span",{children:"Google"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>{let e=window.location.origin;window.location.href="".concat("https://upto-backend.onurhanyilmaz87.workers.dev","/oauth/apple?frontend_url=").concat(encodeURIComponent(e))},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#ffffff",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:[(0,n.jsx)("svg",{style:{width:"1.25rem",height:"1.25rem",marginRight:"0.5rem"},fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),(0,n.jsx)("span",{children:"Apple"})]})]}),(0,n.jsx)("div",{style:{textAlign:"center"},children:(0,n.jsxs)("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:["Don't have an account?"," ",(0,n.jsx)(a(),{href:"/register",style:{color:"#60a5fa",fontWeight:"500",textDecoration:"none"},children:"Sign up"})]})})]})]})})}}},e=>{e.O(0,[874,441,583,358],()=>e(e.s=5673)),_N_E=e.O()}]);