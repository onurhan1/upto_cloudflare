(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{447:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),n=r(2115),a=r(5695),i=r(5731);function o(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),[r,o]=(0,n.useState)("");return((0,n.useEffect)(()=>{let r=t.get("token");t.get("provider"),r?(i.F.setToken(r),e.push("/dashboard")):(o("Authentication failed. No token received."),setTimeout(()=>{e.push("/login")},3e3))},[t,e]),r)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Authentication Error"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:r}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-4",children:"Redirecting to login..."})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Completing authentication..."})]})})}function c(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}),children:(0,s.jsx)(o,{})})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5731:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});class s{setToken(e){this.token=e,e?(localStorage.setItem("token",e),console.log("Token saved to localStorage")):(localStorage.removeItem("token"),console.log("Token removed from localStorage"))}getToken(){return localStorage.getItem("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.startsWith("/")?e:"/".concat(e),s=this.baseUrl.replace(/\/$/,""),n="".concat(s).concat(r);console.log("\uD83D\uDD35 API Request:",t.method||"GET",n);let a={"Content-Type":"application/json",...t.headers},i=this.getToken();if(i&&(a.Authorization="Bearer ".concat(i)),!e.startsWith("/auth/")&&!e.startsWith("/oauth/")){let t=localStorage.getItem("currentOrganizationId");!t||a["X-Organization-ID"]||e.includes("organization_id=")||(a["X-Organization-ID"]=t)}try{let e=await fetch(n,{...t,headers:a,mode:"cors",credentials:"include"});if(console.log("\uD83D\uDFE2 Response status:",e.status,e.statusText),!e.ok)try{let t=await e.json();return console.error("\uD83D\uDD34 API error response:",t),{error:t.error||"Request failed with status ".concat(e.status)}}catch(t){return console.error("\uD83D\uDD34 Failed to parse error response:",t),{error:"Request failed with status ".concat(e.status)}}let r=await e.json();return console.log("âœ… API response received:",Object.keys(r)),{data:r}}catch(e){var o;if(console.error("\uD83D\uDD34 API request error:",e),console.error("Error details:",{name:e.name,message:e.message,url:n}),"Failed to fetch"===e.message||"TypeError"===e.name||(null==(o=e.message)?void 0:o.includes("fetch")))return{error:"Cannot connect to server at ".concat(n,". Please make sure the backend is running on http://localhost:8787. Check browser console for details.")};return{error:e.message||"Network error"}}}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e,t,r){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:r})})}async getServices(e,t){let r=new URLSearchParams({organization_id:e});return t&&r.append("project_id",t),this.request("/services?".concat(r.toString()))}async getService(e){return this.request("/services/".concat(e))}async getServiceSuggestions(e){return this.request("/services/".concat(e,"/suggestions"))}async createService(e,t){return this.request("/services",{method:"POST",headers:{"X-Organization-ID":t},body:JSON.stringify({...e,organization_id:t})})}async updateService(e,t){return this.request("/services/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteService(e){return this.request("/services/".concat(e),{method:"DELETE"})}async testService(e){return this.request("/services/".concat(e,"/test"),{method:"POST"})}async getIncidents(e){let t=new URLSearchParams(e).toString();return this.request("/incidents".concat(t?"?".concat(t):""))}async getIncident(e){return this.request("/incidents/".concat(e))}async createIncident(e){return this.request("/incidents",{method:"POST",body:JSON.stringify(e)})}async updateIncident(e,t){return this.request("/incidents/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async getStatusPages(){return this.request("/status-page/mine")}async createStatusPage(e){return this.request("/status-page",{method:"POST",body:JSON.stringify(e)})}async getStatusPage(e){return this.request("/status-page/".concat(e))}async updateStatusPage(e,t){return this.request("/status-page/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async getIntegrations(){return this.request("/integrations")}async updateTelegramIntegration(e){return this.request("/integrations/telegram",{method:"PATCH",body:JSON.stringify(e)})}async updateEmailIntegration(e){return this.request("/integrations/email",{method:"PATCH",body:JSON.stringify(e)})}async deleteStatusPage(e){return this.request("/status-page/".concat(e),{method:"DELETE"})}async addServiceToStatusPage(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.request("/status-page/".concat(e,"/services"),{method:"POST",body:JSON.stringify({service_id:t,display_order:r})})}async removeServiceFromStatusPage(e,t){return this.request("/status-page/".concat(e,"/services/").concat(t),{method:"DELETE"})}async getOAuthProviders(){return this.request("/oauth/providers")}async handleOAuthCallback(e,t,r){return this.request("/oauth/".concat(e,"/callback"),{method:"POST",body:JSON.stringify({code:t,state:r})})}async getCurrentUser(){return this.request("/users/me")}async getOrganizations(){return this.request("/organizations")}async createOrganization(e,t){return this.request("/organizations",{method:"POST",body:JSON.stringify({name:e,slug:t})})}async getOrganization(e){return this.request("/organizations/".concat(e))}async inviteToOrganization(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member";return this.request("/organizations/".concat(e,"/invite"),{method:"POST",body:JSON.stringify({email:t,role:r})})}async getOrganizationInvitations(e){return this.request("/organizations/".concat(e,"/invitations"))}async getProjects(e){return this.request("/projects?organization_id=".concat(e))}async createProject(e,t,r){return this.request("/projects",{method:"POST",headers:{"X-Organization-ID":r},body:JSON.stringify({name:e,description:t,organization_id:r})})}async getProject(e,t){return this.request("/projects/".concat(e,"?organization_id=").concat(t))}async updateProject(e,t,r){return this.request("/projects/".concat(e),{method:"PATCH",headers:{"X-Organization-ID":t},body:JSON.stringify(r)})}async deleteProject(e,t){return this.request("/projects/".concat(e),{method:"DELETE",headers:{"X-Organization-ID":t}})}async getInvitationDetails(e){return this.request("/invitations/".concat(e))}async acceptInvitation(e){return this.request("/invitations/".concat(e,"/accept"),{method:"POST"})}async getApiKeys(){return this.request("/settings/api-keys")}async saveApiKey(e,t){return this.request("/settings/api-keys/".concat(e),{method:"PUT",body:JSON.stringify({apiKey:t})})}async deleteApiKey(e){return this.request("/settings/api-keys/".concat(e),{method:"DELETE"})}async updateProfile(e,t){return this.request("/settings/profile",{method:"PATCH",body:JSON.stringify({name:e,email:t})})}async changePassword(e,t){return this.request("/settings/password",{method:"PATCH",body:JSON.stringify({currentPassword:e,newPassword:t})})}async getAuditLogs(e){let t=new URLSearchParams;return(null==e?void 0:e.action)&&t.append("action",e.action),(null==e?void 0:e.resource_type)&&t.append("resource_type",e.resource_type),(null==e?void 0:e.user_id)&&t.append("user_id",e.user_id),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString()),(null==e?void 0:e.start_date)&&t.append("start_date",e.start_date.toString()),(null==e?void 0:e.end_date)&&t.append("end_date",e.end_date.toString()),this.request("/audit?".concat(t.toString()))}constructor(e){this.token=null,this.baseUrl=e.replace(/\/$/,""),console.log("\uD83D\uDD35 ApiClient initialized with baseUrl:",this.baseUrl),this.token=localStorage.getItem("token")}}let n=new s("https://upto-backend.onurhanyilmaz87.workers.dev")},6972:(e,t,r)=>{Promise.resolve().then(r.bind(r,447))}},e=>{e.O(0,[441,583,358],()=>e(e.s=6972)),_N_E=e.O()}]);