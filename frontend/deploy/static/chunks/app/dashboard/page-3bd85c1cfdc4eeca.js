(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{311:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(2895).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2915:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(2895).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3974:(e,s,r)=>{Promise.resolve().then(r.bind(r,6357))},5365:(e,s,r)=>{"use strict";r.d(s,{Fc:()=>c,TN:()=>d});var t=r(5155),a=r(2115),l=r(2085),i=r(9434);let n=(0,l.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,s)=>{let{className:r,variant:a,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(n({variant:a}),r),...l})});c.displayName="Alert",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})}).displayName="AlertTitle";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...a})});d.displayName="AlertDescription"},6357:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>y});var t=r(5155),a=r(2115),l=r(5695),i=r(6874),n=r.n(i),c=r(5731),d=r(5290),o=r(1324),x=r(5487),m=r(9397),u=r(2915),h=r(311),f=r(809);let v=(0,r(2895).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var p=r(6695),g=r(6126),j=r(8856),N=r(5365);function y(){let e=(0,l.useRouter)(),{currentOrganization:s,loading:r}=(0,d.Z)(),[i,y]=(0,a.useState)([]),[b,w]=(0,a.useState)([]),[A,k]=(0,a.useState)(!0),[E,R]=(0,a.useState)("");(0,a.useEffect)(()=>{s&&!r?C():r||s||(k(!1),R("Please select an organization"))},[s,r]);let C=async()=>{if(!s)return void k(!1);try{var r,t;let[a,l]=await Promise.all([c.F.getServices(s.id),c.F.getIncidents()]);if(a.error){R(a.error),a.error.includes("Unauthorized")&&e.push("/login");return}l.error&&console.error("Error loading incidents:",l.error),y((null==(r=a.data)?void 0:r.services)||[]),w((null==(t=l.data)?void 0:t.incidents)||[])}catch(e){R(e.message)}finally{k(!1)}},S=i.length,T=i.filter(e=>e.is_active).length,Z=i.filter(e=>"up"===e.currentStatus).length,_=i.filter(e=>"down"===e.currentStatus).length,D=b.filter(e=>"resolved"!==e.status).length,F=[{label:"Total Services",value:S,icon:x.A,description:"All monitored services"},{label:"Active Services",value:T,icon:m.A,description:"Currently monitoring"},{label:"Operational",value:Z,icon:u.A,description:"Services up"},{label:"Down",value:_,icon:h.A,description:"Services down"},{label:"Open Incidents",value:D,icon:f.A,description:"Active incidents"}];return(0,t.jsx)(o.A,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Overview of your monitoring infrastructure"})]}),E&&(0,t.jsx)(N.Fc,{variant:"destructive",children:(0,t.jsx)(N.TN,{children:E})}),r&&(0,t.jsx)(N.Fc,{children:(0,t.jsx)(N.TN,{children:"Loading organization..."})}),!r&&!s&&(0,t.jsx)(N.Fc,{variant:"destructive",children:(0,t.jsx)(N.TN,{children:"Please select an organization from the dropdown above."})}),!r&&s&&(0,t.jsxs)(t.Fragment,{children:[A?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[1,2,3,4,5].map(e=>(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.E,{className:"h-4 w-24"}),(0,t.jsx)(j.E,{className:"h-4 w-4 rounded"})]}),(0,t.jsxs)(p.Wu,{children:[(0,t.jsx)(j.E,{className:"h-8 w-16 mb-1"}),(0,t.jsx)(j.E,{className:"h-3 w-32"})]})]},e))}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:F.map(e=>{let s=e.icon;return(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(p.ZB,{className:"text-sm font-medium",children:e.label}),(0,t.jsx)(s,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(p.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.label)})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(p.ZB,{children:"Recent Services"}),(0,t.jsxs)(n(),{href:"/services",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View all",(0,t.jsx)(v,{className:"h-4 w-4"})]})]}),(0,t.jsx)(p.BT,{children:"Latest monitored services"})]}),(0,t.jsx)(p.Wu,{children:A?(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)(j.E,{className:"h-12 flex-1"})},e))}):0===i.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(x.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No services yet"})]}):(0,t.jsx)("div",{className:"space-y-3",children:i.slice(0,5).map(e=>(0,t.jsx)(n(),{href:"/services/".concat(e.id),className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.type.toUpperCase()})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(e=>{switch(e){case"up":return(0,t.jsx)(g.E,{className:"bg-green-500/10 text-green-400 border-green-500/20",children:"UP"});case"down":return(0,t.jsx)(g.E,{variant:"destructive",children:"DOWN"});case"degraded":return(0,t.jsx)(g.E,{variant:"outline",className:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",children:"DEGRADED"});default:return(0,t.jsx)(g.E,{variant:"secondary",children:"UNKNOWN"})}})(e.currentStatus||"unknown")})]})},e.id))})})]}),(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(p.ZB,{children:"Recent Incidents"}),(0,t.jsxs)(n(),{href:"/incidents",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View all",(0,t.jsx)(v,{className:"h-4 w-4"})]})]}),(0,t.jsx)(p.BT,{children:"Latest incident reports"})]}),(0,t.jsx)(p.Wu,{children:A?(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)(j.E,{className:"h-12 flex-1"})},e))}):0===b.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(f.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No incidents"})]}):(0,t.jsx)("div",{className:"space-y-3",children:b.slice(0,5).map(e=>(0,t.jsx)(n(),{href:"/incidents/".concat(e.id),className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.service_name," â€¢"," ",new Date(1e3*e.started_at).toLocaleString()]})]}),(0,t.jsx)(g.E,{variant:"resolved"===e.status?"default":"monitoring"===e.status?"outline":"destructive",className:"resolved"===e.status?"bg-green-500/10 text-green-400 border-green-500/20":"monitoring"===e.status?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":"",children:e.status.toUpperCase()})]})},e.id))})})]})]})]})]})})}},6695:(e,s,r)=>{"use strict";r.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>n});var t=r(5155),a=r(2115),l=r(9434);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},8856:(e,s,r)=>{"use strict";r.d(s,{E:()=>l});var t=r(5155),a=r(9434);function l(e){let{className:s,...r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",s),...r})}}},e=>{e.O(0,[874,597,739,712,324,441,583,358],()=>e(e.s=3974)),_N_E=e.O()}]);