(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{699:(e,t,r)=>{Promise.resolve().then(r.bind(r,3692))},3692:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(5155),a=r(2115),l=r(5695),n=r(6874),d=r.n(n),c=r(5731),i=r(1324),o=r(7924),m=r(809),x=r(4186),u=r(2523),f=r(5127),h=r(6126),j=r(6695),p=r(8856),N=r(757);function g(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)([]),[n,g]=(0,a.useState)(!0),[v,b]=(0,a.useState)(""),[y,w]=(0,a.useState)("");(0,a.useEffect)(()=>{R()},[]);let R=async()=>{try{let s=await c.F.getIncidents();if(s.error)b(s.error),s.error.includes("Unauthorized")&&e.push("/login");else{var t;r((null==(t=s.data)?void 0:t.incidents)||[])}}catch(e){b(e.message||"Failed to load incidents")}finally{g(!1)}},C=t.filter(e=>{var t;return e.title.toLowerCase().includes(y.toLowerCase())||(null==(t=e.service_name)?void 0:t.toLowerCase().includes(y.toLowerCase()))});return(0,s.jsx)(i.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Incidents"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage service incidents"})]}),v&&(0,s.jsx)(j.Zp,{className:"border-destructive",children:(0,s.jsx)(j.Wu,{className:"pt-6",children:(0,s.jsx)("p",{className:"text-sm text-destructive",children:v})})}),(0,s.jsx)(j.Zp,{children:(0,s.jsx)(j.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,s.jsx)(u.p,{type:"text",placeholder:"Search incidents...",value:y,onChange:e=>w(e.target.value),className:"pl-9"})]})})}),(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{children:[(0,s.jsx)(j.ZB,{children:"All Incidents"}),(0,s.jsx)(j.BT,{children:C.length>0?"Showing ".concat(C.length," of ").concat(t.length," incidents"):"No incidents found"})]}),(0,s.jsx)(j.Wu,{children:n?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)(p.E,{className:"h-12 flex-1"})},e))}):0===C.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)(m.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:y?"No incidents found":"No incidents"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:y?"Try adjusting your search query":"All services are operating normally"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(f.XI,{children:[(0,s.jsx)(f.A0,{children:(0,s.jsxs)(f.Hj,{children:[(0,s.jsx)(f.nd,{children:"Incident"}),(0,s.jsx)(f.nd,{children:"Service"}),(0,s.jsx)(f.nd,{children:"Status"}),(0,s.jsx)(f.nd,{children:"Started"}),(0,s.jsx)(f.nd,{children:"Duration"})]})}),(0,s.jsx)(f.BF,{children:C.map(t=>{let r=new Date(1e3*t.started_at),a=((e,t)=>{let r=new Date(1e3*e),s=Math.floor(((t?new Date(1e3*t):new Date).getTime()-r.getTime())/1e3/60);if(s<60)return"".concat(s,"m");let a=Math.floor(s/60);if(a<24)return"".concat(a,"h ").concat(s%60,"m");let l=Math.floor(a/24);return"".concat(l,"d ").concat(a%24,"h")})(t.started_at,t.resolved_at);return(0,s.jsxs)(f.Hj,{className:"cursor-pointer",onClick:()=>e.push("/incidents/".concat(t.id)),children:[(0,s.jsx)(f.nA,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(d(),{href:"/incidents/".concat(t.id),className:"font-medium hover:underline",children:t.title}),t.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:t.description})]})}),(0,s.jsx)(f.nA,{children:(0,s.jsx)("span",{className:"text-sm",children:t.service_name||"N/A"})}),(0,s.jsx)(f.nA,{children:(e=>{switch(e){case"resolved":return(0,s.jsx)(h.E,{className:"bg-green-500/10 text-green-400 border-green-500/20",children:"RESOLVED"});case"monitoring":return(0,s.jsx)(h.E,{variant:"outline",className:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",children:"MONITORING"});case"open":return(0,s.jsx)(h.E,{variant:"destructive",children:"OPEN"});default:return(0,s.jsx)(h.E,{variant:"secondary",children:e.toUpperCase()})}})(t.status)}),(0,s.jsx)(f.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:(0,N.m)(r,{addSuffix:!0})})]})}),(0,s.jsx)(f.nA,{children:(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:a})})]},t.id)})})]})})})]})]})})}},4186:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2895).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>c,Hj:()=>i,XI:()=>n,nA:()=>m,nd:()=>o});var s=r(5155),a=r(2115),l=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...a})});d.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});i.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});o.displayName="TableHead";let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});m.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>i,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>d});var s=r(5155),a=r(2115),l=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});n.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});i.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},8856:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(5155),a=r(9434);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}}},e=>{e.O(0,[874,597,739,712,757,324,441,583,358],()=>e(e.s=699)),_N_E=e.O()}]);